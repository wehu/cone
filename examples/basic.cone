module xxx

type A<a> {
   B(a)
   C
}

effect state<a> {
   fun get() : a
   fun set(a) : unit
}

fun test() : state<i32> unit {
   val a = get<i32>()
   set(a+1)
}

fun main() : io unit {
   var a = 0

   handle state<i32> {
      test()
   } with {
      fun get() {
         resume(a)
      }
      fun set(v:i32) {
         a = v
      }
   }
   print(a)
}

